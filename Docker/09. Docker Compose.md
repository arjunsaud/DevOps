# Docker Compose

Compose is a tool for defining and running multi-container Docker applications. With Compose, you use a YAML file to configure your application's services. Then, with a single command, you create and start all the services from your configuration.

Compose works in all environments; production, staging, development, testing, as well as CI workflows. It also has commands for managing the whole lifecycle of your application:

Start, stop, and rebuild services
View the status of running services
Stream the log output of running services
Run a one-off command on a service
The key features of Compose that make it effective are:

Have multiple isolated environments on a single host
Preserve volume data when containers are created
Only recreate containers that have changed
Support variables and moving a composition between environments

## Commands

### Run Docker Compose : `docker compose up`

By default it searches for 'docker-compose.yml' file
If we want to run different compose file with different name.

Run : `docker-compose -f filename.yml up -d`

Down : `docker-compose -f filename.yml down`

Or

Run : `docker-compose -f filename.json up -d`

Down : `docker-compose -f filename.json down`

If we run above command one it run compose file and runs container as specified but if we hit same command again it looks compose file and only changes are done .

### To stop docker compose : `docker compose down `

## Steps for Writing Docker Compose file

It is not necessary to write compose file in yml. we can write in json format also

```
version : '3'
//for defining version of compose file

services:
// service is for defining applications
  web:
  //here web is app
    build: .
    // this takes Dockerfile to make image
    ports:
    //used to port mapping
      - "8000:5000"

  redis:
  //this is another app
    image: "redis:alpine"
    //if not build command then used image
```
